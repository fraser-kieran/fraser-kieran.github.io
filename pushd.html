<!DOCTYPE HTML>
<!--
	Strata by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Pushd Experiment</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link rel="apple-touch-icon" href="images/favicon.png">
        <link rel="shortcut icon" href="images/favicon.png">
        
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
		<link rel="stylesheet" href="assets/css/pushd.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">

        
        <style>
            .firebaseui-label {
                color: rgba(0,0,0,.54);
                direction: ltr;
                font-size: 16px;
                text-align: left;
                padding-left: 5px;
                padding-top: 2px;
            }
        </style>
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header" style="background-color: black">
				<div class="inner">
					<!--<a href="" class="image avatar"><img src="images/LinkedInProfiler.png" alt="" /></a>
					<h1><strong>Kieran Fraser</strong><br />
                        PhD Candidate @ ADAPT Centre<br/>
                        Trinity College Dublin</h1>-->
				</div>
			</header>

		<!-- Main -->
			<div id="main">
                    
				<!-- One -->
                    <span class="image"><img style="width: 50%; margin: auto;" src="images/pushd/pushd_black_no_caption_3.0.png" alt="pushd logo" /></span>
					<section id="one">
                        <p>The <strong>Pushd</strong> experiment aims to test alternate methods of creating and delivering push-notifications in order to improve the engagement experience for notification receivers. This is achieved by monitoring engagements with notifications and identifying patterns of preference for content and delivery. 
                        </p>
                        <p>For this experiment, you are asked to answer a number of questions relating to your push-notification preferences before then subscribing to a number of topics. You will then be pushed notifications relating to those topics over a period of two weeks with your subsequent engagements (open/dismiss) recorded. At the end of the two week period you will be asked to answer a final questionnaire.</p>
						
                        <p>Please read the following documents before signing up:</p>
                        <ol>
                            <li><a href="" target="_blank">Participant Information Sheet</a></li>
                            <li><a href="" target="_blank">Informed Consent</a></li>
                        </ol>   
                        <div>
                            <input type="checkbox" id="cb-info" name="cb-info">
				            <label for="cb-info">I have read and understood the Participant Information Sheet.</label>
                            
                            <input type="checkbox" id="cb-consent" name="cb-consent">
				            <label for="cb-consent">I have read the Informed Consent document and am happy to grant my consent.</label>
                        </div>
                        <p id="checkbox-message" style="display: none;"><strong style="color: red;">You must check all boxes to participate in the project.</strong></p>
						<ul class="actions">
							<li><a id="subButton" class="button" onclick="signup()">Lets Start</a></li>
						</ul>
                        <p id="success-message" style="display: none;"><strong style="color: green;">Thank you for signing up! Please now download the app and sign-in using the same credentials.</strong></p>
                        <div id="sign-up-container" style="display: none;">
                            <p>Enter your Prolific Academic email address below and select next.</p>
                            <div id="firebaseui-auth-container"></div>
                        </div>
					</section>
                
				<!-- Two -->
					<section id="four">
						<h2>Get In Touch</h2>
						<p>If you have any questions regarding the <strong>Pushd</strong> Experiment, please use the form below or the email address provided and I will follow up ASAP!</p>
						<div class="row">
							<div class="col-8 col-12-small">
								<form id='contact' action="https://formspree.io/kieran.fraser@adaptcentre.ie" method="POST">
									<div class="row gtr-uniform gtr-50">
										<div class="col-6 col-12-xsmall"><input type="text" name="name" id="name" placeholder="Name" /></div>
										<div class="col-6 col-12-xsmall"><input type="email" name="email" id="email" placeholder="Email" /></div>
										<div class="col-12"><textarea name="message" id="message" placeholder="Message" rows="4"></textarea></div>
									</div>
                                    <br/>
                                    <ul class="actions">
                                        <li><input type="submit" value="Send Message" /></li>
                                    </ul>
								</form>
							</div>
							<div class="col-4 col-12-small">
								<ul class="labeled-icons">
									<li>
										<h3 class="icon fa-home"><span class="label">Location</span></h3>
										Dublin, Ireland<br />
									</li>
									<li>
										<h3 class="icon fa-envelope-o"><span class="label">Email</span></h3>
										<a href="#">kieran.fraser@adaptcentre.ie</a>
									</li>
								</ul>
							</div>
						</div>
					</section>
			</div>

		<!-- Footer -->
			<footer id="footer">
				<div class="inner">
					<ul class="copyright">
						<li><strong>Kieran Fraser @ ADAPT Centre</strong></li><li>Trinity College Dublin</li>
					</ul>
				</div>
			</footer>
        

        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h2 id="exampleModalLabel">Notification Preferences</h2>
              </div>
              <div class="modal-body">
                <ol>
                    <li>Select multiple (min 5) topics which you would like to receive notifications on:<br>
                        <select id="topicPrefs" class="selectpicker" multiple>
                          <option>comedy</option>
                          <option>business</option>
                          <option>food</option>
                        </select>
                    </li>
                    <br>
                    <li>Select multiple (min 5) websites which you would like to receive notifications from:<br>
                        <select id="posWebPrefs" class="selectpicker" data-max-options="5" multiple>
                          <option>rte.ie</option>
                          <option>reddit.com</option>
                          <option>wikipedia.org</option>
                        </select>
                    </li>
                    <br>
                    <li>Select multiple (min 5) websites which you would <strong>NOT</strong> like to receive notifications from:<br>
                        <select id="negWebPrefs" class="selectpicker" data-max-options="5" multiple>
                          <option>rte.ie</option>
                          <option>reddit.com</option>
                          <option>wikipedia.org</option>
                        </select>
                    </li>
                </ol>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="savePrefs()">Save</button>
              </div>
            </div>
          </div>
        </div>
        
		<!-- Scripts -->
            <script
              src="https://code.jquery.com/jquery-3.4.1.min.js"
              integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
              crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
            <!-- Latest compiled and minified JavaScript -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
            
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
            <script src="assets/js/web-push-initialise.js"></script>
            <!-- The core Firebase JS SDK is always required and must be listed first -->
            <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-app.js"></script>
            <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-database.js"></script>
            <script src="https://www.gstatic.com/firebasejs/7.8.2/firebase-auth.js"></script>
            <script>
                // Your web app's Firebase configuration
                var firebaseConfig = {
                    apiKey: "AIzaSyAQu435FNTmXIcFigctYMdRO8sPLX78HI0",
                    authDomain: "pushdexp.firebaseapp.com",
                    databaseURL: "https://pushdexp.firebaseio.com",
                    projectId: "pushdexp",
                    storageBucket: "pushdexp.appspot.com",
                    messagingSenderId: "84430156157",
                    appId: "1:84430156157:web:b4fc89624448507bb05c14"
                };
                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);
                var database = firebase.database();
                
                /*$('#exampleModal').modal({
                    backdrop: 'static',
                    keyboard: false
                })*/
                
                initSubscribe()
                
                firebase.auth().onAuthStateChanged(function(user) {
                    if (user) {
                        console.log('Anonymous sign-in')
                        var isAnonymous = user.isAnonymous;
                        var uid = user.uid;
                    } else {
                        firebase.auth().signInAnonymously().catch(function(error) {
                            $.alert({
                                title: 'Oops!',
                                content: 'Something went wrong. Please try again later.',
                            });
                            
                        });
                    }
                });
                
                            
                
                function signup(){
                    if($("#cb-info").prop('checked') && $("#cb-consent").prop('checked')){
                        $("#checkbox-message").hide();
                        subButtonClick()
                    }
                    else{
                        $("#checkbox-message").show();
                    }
                }
                
                function savePrefs(){
                    
                    topics = $('#topicPrefs').val()
                    posWeb = $('#posWebPrefs').val()
                    negWeb = $('#negWebPrefs').val()
                    
                    if(topics.length<2|posWeb.length<2|negWeb.length<2){
                        $.alert({
                            title: 'Error!',
                            content: 'You must select at least 5 values per field',
                        });
                        return
                    }
                    else{
                        savePreferences(topics, posWeb, negWeb)
                        
                        $.confirm({
                            title: 'Finished',
                            content: 'You are now set up. Simply engage with incoming notifiations as normal over the next two weeks. You will receive a final questionnaire via notification at the end of the experiment period which will conclude the study. Thanks for participating!',
                            buttons: {
                                confirm: function () {
                                    $('#exampleModal').modal('hide')
                                }
                            }
                        });
                    }
                }
                
                function savePreferences(topics, posWeb, negWeb) {
                    
                    userId = document.cookie.split('=')[1]
                    if(userId.charAt(0) == '_'){
                        database.ref('participant/'+userId).update({
                            topics: topics,
                            pos_web: posWeb,
                            neg_web: negWeb
                        });
                    }
                }
            </script>
            
			<script src="assets/js/jquery.poptrox.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
           

	</body>
</html>